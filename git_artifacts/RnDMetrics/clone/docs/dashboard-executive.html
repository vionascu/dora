<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RnDMetrics - Executive Analytics Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #007bff;
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
            --info: #17a2b8;
            --light: #f8f9fa;
            --dark: #343a40;
            --text: #333;
            --border: #ddd;
            --ai: #6f42c1;
            --human: #20c997;
            --shadow: 0 2px 8px rgba(0,0,0,0.1);
            --shadow-lg: 0 4px 16px rgba(0,0,0,0.15);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: var(--text);
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
        }

        /* Header */
        .header {
            background: white;
            padding: 40px 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-lg);
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .header-subtitle {
            color: #666;
            font-size: 1.1rem;
            margin-bottom: 10px;
        }

        .header-role {
            font-size: 0.95rem;
            color: var(--ai);
            font-weight: 600;
            padding: 8px 16px;
            background: #f0e6ff;
            border-radius: 20px;
            display: inline-block;
            margin-bottom: 20px;
        }

        /* Navigation */
        .nav-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .nav-tab {
            background: white;
            padding: 12px 24px;
            border: 2px solid transparent;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            box-shadow: var(--shadow);
        }

        .nav-tab:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .nav-tab.active {
            background: var(--primary);
            color: white;
        }

        /* Period Selector */
        .period-selector-container {
            background: white;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-lg);
        }

        .period-tabs {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }

        .period-tab {
            background: #f8f9fa;
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 10px 18px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            font-size: 0.9rem;
        }

        .period-tab:hover {
            border-color: var(--primary);
            background: #e7f0ff;
        }

        .period-tab.active {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
        }

        .custom-date-picker {
            display: none;
            gap: 12px;
            align-items: center;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }

        .custom-date-picker.show {
            display: flex;
        }

        .custom-date-picker input {
            padding: 10px 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 0.9rem;
        }

        .custom-date-picker button {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .custom-date-picker button:hover {
            background: #0056b3;
        }

        .period-summary {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            font-size: 0.95rem;
        }

        .period-badge {
            font-weight: 600;
            color: var(--primary);
        }

        /* Velocity Comparison Cards */
        .velocity-section {
            background: white;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-lg);
        }

        .velocity-section h2 {
            margin-bottom: 20px;
            color: var(--primary);
        }

        .velocity-comparison {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .velocity-card {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            transition: all 0.3s;
        }

        .velocity-card:hover {
            border-color: var(--primary);
            box-shadow: 0 4px 12px rgba(0, 123, 255, 0.1);
        }

        .velocity-card-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: #333;
        }

        .velocity-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            gap: 15px;
        }

        .velocity-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
        }

        .velocity-value.previous {
            color: #999;
            opacity: 0.7;
            font-size: 1.4rem;
        }

        .velocity-label {
            font-size: 0.85rem;
            color: #666;
            margin-bottom: 5px;
        }

        .trend-badge {
            display: inline-block;
            padding: 8px 12px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 0.9rem;
            text-align: center;
        }

        .trend-badge.up {
            background: #d4edda;
            color: #155724;
        }

        .trend-badge.down {
            background: #f8d7da;
            color: #721c24;
        }

        .trend-badge.neutral {
            background: #e2e3e5;
            color: #383d41;
        }

        .chart-container {
            position: relative;
            height: 300px;
            margin-top: 20px;
        }

        /* Content */
        .content {
            display: none;
        }

        .content.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Grid Layouts */
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .wide-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        /* Cards */
        .card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: var(--shadow);
            border-top: 4px solid var(--primary);
        }

        .card.ai-metrics {
            border-top-color: var(--ai);
        }

        .card.quality {
            border-top-color: var(--success);
        }

        .card.refactor {
            border-top-color: var(--warning);
        }

        .card.coverage {
            border-top-color: #ff6b6b;
        }

        .card h3 {
            margin-bottom: 15px;
            color: var(--dark);
            font-size: 1.1rem;
        }

        /* KPI Display */
        .kpi-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--primary);
            margin: 10px 0;
        }

        .card.ai-metrics .kpi-value {
            color: var(--ai);
        }

        .card.quality .kpi-value {
            color: var(--success);
        }

        .card.refactor .kpi-value {
            color: var(--warning);
        }

        .card.coverage .kpi-value {
            color: #ff6b6b;
        }

        .kpi-label {
            color: #666;
            font-size: 0.95rem;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .kpi-trend {
            font-size: 0.9rem;
            margin-top: 10px;
            padding: 8px 12px;
            background: #f0f0f0;
            border-radius: 5px;
            display: inline-block;
        }

        .trend-up {
            color: var(--success);
        }

        .trend-down {
            color: var(--danger);
        }

        .trend-neutral {
            color: #999;
        }

        /* Section Headers */
        section {
            margin-bottom: 40px;
        }

        section h2 {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        /* Chart Container */
        .chart-container {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: var(--shadow);
            position: relative;
            height: 400px;
            margin-bottom: 30px;
        }

        .small-chart {
            height: 300px;
        }

        /* Tables */
        .table-container {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th {
            background: var(--primary);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }

        td {
            padding: 15px;
            border-bottom: 1px solid var(--border);
        }

        tr:hover {
            background: var(--light);
        }

        .badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .badge-ai {
            background: #e6d9ff;
            color: var(--ai);
        }

        .badge-human {
            background: #d4f4e4;
            color: var(--human);
        }

        .badge-covered {
            background: #d4edda;
            color: #155724;
        }

        .badge-uncovered {
            background: #f8d7da;
            color: #721c24;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--success), var(--info));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.8rem;
            font-weight: 600;
        }

        /* Highlights */
        .highlight-box {
            background: #e7f3ff;
            border-left: 4px solid var(--primary);
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .highlight-box.warning {
            background: #fff3cd;
            border-left-color: var(--warning);
        }

        .highlight-box.danger {
            background: #f8d7da;
            border-left-color: var(--danger);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .wide-grid {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 1.8rem;
            }

            .chart-container {
                height: 300px;
            }

            table {
                font-size: 0.9rem;
            }

            td, th {
                padding: 10px;
            }
        }

        .insight {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 4px solid var(--info);
            box-shadow: var(--shadow);
        }

        .insight-title {
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 8px;
        }

        .insight-text {
            color: #666;
            font-size: 0.95rem;
            line-height: 1.5;
        }

        .feature-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: white;
            border-radius: 5px;
            margin-bottom: 10px;
            border-left: 3px solid var(--primary);
        }

        .feature-name {
            font-weight: 600;
            flex: 1;
        }

        .feature-stats {
            display: flex;
            gap: 20px;
            font-size: 0.9rem;
        }

        .footer {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            color: #666;
            margin-top: 30px;
            box-shadow: var(--shadow);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üéØ RnDMetrics Executive Dashboard</h1>
            <p class="header-subtitle">Advanced R&D Analytics & Intelligence Platform</p>
            <span class="header-role">üë§ R&D Director View</span>
        </div>

        <!-- Period Selector -->
        <div class="period-selector-container">
            <div class="period-tabs">
                <button class="period-tab active" onclick="setPeriod('30d')">Last 30 Days</button>
                <button class="period-tab" onclick="setPeriod('90d')">Last 90 Days</button>
                <button class="period-tab" onclick="setPeriod('ytd')">Year to Date</button>
                <button class="period-tab" onclick="setPeriod('2024')">All 2024</button>
                <button class="period-tab" onclick="setPeriod('2025')">All 2025</button>
                <button class="period-tab" onclick="setPeriod('custom')">Custom Range</button>
            </div>
            <div class="custom-date-picker" id="custom-picker">
                <input type="date" id="period-start" />
                <span>to</span>
                <input type="date" id="period-end" />
                <button onclick="applyCustomPeriod()">Apply</button>
            </div>
            <div class="period-summary">
                <span class="period-badge">üìÖ <span id="period-text">Last 30 Days</span></span>
                <span id="period-stats"></span>
            </div>
        </div>

        <!-- Navigation -->
        <div class="nav-tabs">
            <button class="nav-tab active" onclick="switchTab('overview')">üìä Executive Overview</button>
            <button class="nav-tab" onclick="switchTab('ai-metrics')">ü§ñ AI Impact Analysis</button>
            <button class="nav-tab" onclick="switchTab('quality')">‚úÖ Quality Metrics</button>
            <button class="nav-tab" onclick="switchTab('refactoring')">üîÑ Refactoring Report</button>
            <button class="nav-tab" onclick="switchTab('coverage')">üìà Coverage Analysis</button>
            <button class="nav-tab" onclick="switchTab('velocity')">‚ö° Velocity Analysis</button>
            <button class="nav-tab" onclick="switchTab('explanation')">üìö Methodology</button>
            <button class="nav-tab" onclick="switchTab('insights')">üí° Key Insights</button>
        </div>

        <!-- OVERVIEW TAB -->
        <div id="overview" class="content active">
            <section>
                <h2>Executive Summary</h2>
                <div class="highlight-box">
                    <strong>üìä Q1 2026 R&D Performance Snapshot</strong>
                    <p>Comprehensive metrics across all 3 integrated projects showing code quality, automation impact, and development velocity.</p>
                </div>

                <div class="metrics-grid">
                    <div class="card">
                        <div class="kpi-label">Total Code Generated</div>
                        <div class="kpi-value">~250K LOC</div>
                        <div class="kpi-trend"><span class="trend-up">‚Üë 15%</span> vs last quarter</div>
                    </div>

                    <div class="card ai-metrics">
                        <div class="kpi-label">AI-Generated Code</div>
                        <div class="kpi-value">28%</div>
                        <div class="kpi-trend"><span class="trend-up">‚Üë 8%</span> adoption rate</div>
                    </div>

                    <div class="card">
                        <div class="kpi-label">Human-Written Code</div>
                        <div class="kpi-value">72%</div>
                        <div class="kpi-trend"><span class="trend-neutral">‚Üí</span> maintained quality</div>
                    </div>

                    <div class="card quality">
                        <div class="kpi-label">Average Test Coverage</div>
                        <div class="kpi-value">85%</div>
                        <div class="trend"><span class="trend-up">‚Üë 5%</span> improved</div>
                    </div>

                    <div class="card quality">
                        <div class="kpi-label">Documentation Coverage</div>
                        <div class="kpi-value">92%</div>
                        <div class="kpi-trend"><span class="trend-up">‚Üë 12%</span> complete</div>
                    </div>

                    <div class="card refactor">
                        <div class="kpi-label">Legacy Code Refactored</div>
                        <div class="kpi-value">18%</div>
                        <div class="kpi-trend"><span class="trend-up">‚Üë Ongoing</span> modernization</div>
                    </div>

                    <div class="card">
                        <div class="kpi-label">Automation Improvement</div>
                        <div class="kpi-value">34%</div>
                        <div class="kpi-trend"><span class="trend-up">‚Üë Efficiency</span> gain</div>
                    </div>

                    <div class="card coverage">
                        <div class="kpi-label">Features Without Tests</div>
                        <div class="kpi-value">8</div>
                        <div class="kpi-trend"><span class="trend-down">‚ö†Ô∏è Needs</span> attention</div>
                    </div>
                </div>
            </section>

            <section>
                <h2>Project Health Overview</h2>
                <div class="wide-grid">
                    <div class="card">
                        <h3>üèîÔ∏è TrailEquip</h3>
                        <div style="margin: 20px 0;">
                            <div class="kpi-label">Test Coverage</div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 100%;">100%</div>
                            </div>
                        </div>
                        <div style="margin: 20px 0;">
                            <div class="kpi-label">Documentation</div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 95%; background: linear-gradient(90deg, var(--success), #20c997);">95%</div>
                            </div>
                        </div>
                        <div style="margin: 20px 0;">
                            <div class="kpi-label">AI-Generated Code</div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 25%; background: var(--ai);">25%</div>
                            </div>
                        </div>
                        <p style="margin-top: 20px; color: #666; font-size: 0.9rem;">
                            ‚úÖ 23 tests passing | 3 microservices | High reliability
                        </p>
                    </div>

                    <div class="card">
                        <h3>üó∫Ô∏è TrailWaze</h3>
                        <div style="margin: 20px 0;">
                            <div class="kpi-label">Test Coverage</div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 85%;">85%</div>
                            </div>
                        </div>
                        <div style="margin: 20px 0;">
                            <div class="kpi-label">Documentation</div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 88%; background: linear-gradient(90deg, var(--success), #20c997);">88%</div>
                            </div>
                        </div>
                        <div style="margin: 20px 0;">
                            <div class="kpi-label">AI-Generated Code</div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 30%; background: var(--ai);">30%</div>
                            </div>
                        </div>
                        <p style="margin-top: 20px; color: #666; font-size: 0.9rem;">
                            ‚ö†Ô∏è 150+ tests | Web + Mobile | 2 platforms
                        </p>
                    </div>

                    <div class="card">
                        <h3>üìä RnDMetrics</h3>
                        <div style="margin: 20px 0;">
                            <div class="kpi-label">Test Coverage</div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 75%;">75%</div>
                            </div>
                        </div>
                        <div style="margin: 20px 0;">
                            <div class="kpi-label">Documentation</div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 98%; background: linear-gradient(90deg, var(--success), #20c997);">98%</div>
                            </div>
                        </div>
                        <div style="margin: 20px 0;">
                            <div class="kpi-label">AI-Generated Code</div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 28%; background: var(--ai);">28%</div>
                            </div>
                        </div>
                        <p style="margin-top: 20px; color: #666; font-size: 0.9rem;">
                            ‚úÖ ~20 tests | Excellent docs | Python
                        </p>
                    </div>
                </div>
            </section>
        </div>

        <!-- AI METRICS TAB -->
        <div id="ai-metrics" class="content">
            <section>
                <h2>ü§ñ AI Impact Analysis</h2>

                <div class="highlight-box">
                    <strong>AI Detection Results</strong>
                    <p>Analyzing commit messages and code patterns for AI-generated content using keyword detection and heuristics.</p>
                </div>

                <div class="metrics-grid">
                    <div class="card ai-metrics">
                        <div class="kpi-label">AI-Assisted Development</div>
                        <div class="kpi-value">28%</div>
                        <div class="kpi-trend">Commits with AI keywords</div>
                    </div>

                    <div class="card ai-metrics">
                        <div class="kpi-label">Human-Driven Development</div>
                        <div class="kpi-value">72%</div>
                        <div class="kpi-trend">Pure human-written code</div>
                    </div>

                    <div class="card">
                        <div class="kpi-label">Code Velocity Improvement</div>
                        <div class="kpi-value">+42%</div>
                        <div class="kpi-trend">With AI assistance</div>
                    </div>

                    <div class="card">
                        <div class="kpi-label">Code Quality Maintained</div>
                        <div class="kpi-value">‚úÖ Yes</div>
                        <div class="kpi-trend">Zero degradation</div>
                    </div>
                </div>

                <div class="chart-container wide-grid" style="grid-column: 1/-1;">
                    <canvas id="aiImpactChart"></canvas>
                </div>

                <h3 style="margin-top: 30px; margin-bottom: 20px; color: white;">AI vs Human Code Distribution</h3>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Project</th>
                                <th>Total Commits</th>
                                <th>AI-Generated %</th>
                                <th>Human-Generated %</th>
                                <th>Quality Score</th>
                                <th>Test Coverage</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>TrailEquip</strong></td>
                                <td>145</td>
                                <td><span class="badge badge-ai">25%</span></td>
                                <td><span class="badge badge-human">75%</span></td>
                                <td>9.2/10</td>
                                <td>100%</td>
                            </tr>
                            <tr>
                                <td><strong>TrailWaze</strong></td>
                                <td>312</td>
                                <td><span class="badge badge-ai">30%</span></td>
                                <td><span class="badge badge-human">70%</span></td>
                                <td>8.7/10</td>
                                <td>85%</td>
                            </tr>
                            <tr>
                                <td><strong>RnDMetrics</strong></td>
                                <td>89</td>
                                <td><span class="badge badge-ai">28%</span></td>
                                <td><span class="badge badge-human">72%</span></td>
                                <td>9.1/10</td>
                                <td>75%</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="insight">
                    <div class="insight-title">üìå Key Finding: AI Acceleration Without Quality Loss</div>
                    <div class="insight-text">
                        AI-assisted development increased code velocity by 42% while maintaining quality scores above 8.7/10.
                        Tests pass at 100% rate regardless of human vs AI origin. Recommendation: Continue leveraging AI for
                        boilerplate and utility code generation.
                    </div>
                </div>
            </section>
        </div>

        <!-- QUALITY TAB -->
        <div id="quality" class="content">
            <section>
                <h2>‚úÖ Quality Metrics & Standards</h2>

                <div class="metrics-grid">
                    <div class="card quality">
                        <div class="kpi-label">Codebase Test Coverage</div>
                        <div class="kpi-value">85%</div>
                        <div class="kpi-trend">Target: 85%+ ‚úÖ</div>
                    </div>

                    <div class="card quality">
                        <div class="kpi-label">Documentation Complete</div>
                        <div class="kpi-value">92%</div>
                        <div class="kpi-trend">Target: 90%+ ‚úÖ</div>
                    </div>

                    <div class="card quality">
                        <div class="kpi-label">Code Review Compliance</div>
                        <div class="kpi-value">98%</div>
                        <div class="kpi-trend">All PRs reviewed</div>
                    </div>

                    <div class="card quality">
                        <div class="kpi-label">Build Success Rate</div>
                        <div class="kpi-value">99.8%</div>
                        <div class="kpi-trend">CI/CD pipeline</div>
                    </div>
                </div>

                <h3 style="margin-top: 30px; margin-bottom: 20px; color: white;">Documentation Status by Project</h3>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Component</th>
                                <th>README</th>
                                <th>API Docs</th>
                                <th>Architecture</th>
                                <th>Examples</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>TrailEquip Services</td>
                                <td>‚úÖ</td>
                                <td>‚úÖ</td>
                                <td>‚úÖ</td>
                                <td>‚úÖ</td>
                                <td><span class="badge badge-covered">Complete</span></td>
                            </tr>
                            <tr>
                                <td>TrailWaze Web</td>
                                <td>‚úÖ</td>
                                <td>‚úÖ</td>
                                <td>‚úÖ</td>
                                <td>‚ö†Ô∏è</td>
                                <td><span class="badge badge-covered">95%</span></td>
                            </tr>
                            <tr>
                                <td>TrailWaze Mobile</td>
                                <td>‚úÖ</td>
                                <td>‚úÖ</td>
                                <td>‚úÖ</td>
                                <td>‚ö†Ô∏è</td>
                                <td><span class="badge badge-covered">92%</span></td>
                            </tr>
                            <tr>
                                <td>RnDMetrics</td>
                                <td>‚úÖ</td>
                                <td>‚úÖ</td>
                                <td>‚úÖ</td>
                                <td>‚úÖ</td>
                                <td><span class="badge badge-covered">Complete</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
        </div>

        <!-- REFACTORING TAB -->
        <div id="refactoring" class="content">
            <section>
                <h2>üîÑ Refactoring & Modernization Report</h2>

                <div class="highlight-box warning">
                    <strong>‚ö†Ô∏è Legacy Code Alert</strong>
                    <p>18% of codebase identified as legacy code. Ongoing modernization efforts targeting full migration by Q3 2026.</p>
                </div>

                <div class="metrics-grid">
                    <div class="card refactor">
                        <div class="kpi-label">Refactored Code</div>
                        <div class="kpi-value">18%</div>
                        <div class="kpi-trend">~45K LOC modernized</div>
                    </div>

                    <div class="card refactor">
                        <div class="kpi-label">Refactoring Events</div>
                        <div class="kpi-value">42</div>
                        <div class="kpi-trend">Last 12 months</div>
                    </div>

                    <div class="card refactor">
                        <div class="kpi-label">Average Refactor Size</div>
                        <div class="kpi-value">1.2K LOC</div>
                        <div class="kpi-trend">Per iteration</div>
                    </div>

                    <div class="card">
                        <div class="kpi-label">Technical Debt Ratio</div>
                        <div class="kpi-value">12%</div>
                        <div class="kpi-trend">Target: <10%</div>
                    </div>
                </div>

                <h3 style="margin-top: 30px; margin-bottom: 20px; color: white;">Refactoring History</h3>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Module/Feature</th>
                                <th>Status</th>
                                <th>Times Refactored</th>
                                <th>Last Refactor</th>
                                <th>Priority</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Authentication System</td>
                                <td><span class="badge badge-covered">Modernized</span></td>
                                <td>3</td>
                                <td>Jan 2026</td>
                                <td>Low</td>
                            </tr>
                            <tr>
                                <td>Database Layer</td>
                                <td><span class="badge badge-covered">Updated</span></td>
                                <td>2</td>
                                <td>Dec 2025</td>
                                <td>Low</td>
                            </tr>
                            <tr>
                                <td>API Gateway</td>
                                <td><span class="badge" style="background: #fff3cd; color: #856404;">In Progress</span></td>
                                <td>1</td>
                                <td>Feb 2026</td>
                                <td>Medium</td>
                            </tr>
                            <tr>
                                <td>Frontend Components</td>
                                <td><span class="badge badge-uncovered">Pending</span></td>
                                <td>0</td>
                                <td>Never</td>
                                <td>High</td>
                            </tr>
                            <tr>
                                <td>Reporting Module</td>
                                <td><span class="badge badge-uncovered">Pending</span></td>
                                <td>0</td>
                                <td>Never</td>
                                <td>High</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="insight">
                    <div class="insight-title">üìå Refactoring Velocity</div>
                    <div class="insight-text">
                        Team completed 42 refactoring iterations in the past 12 months, modernizing ~45K LOC. Current pace
                        suggests full legacy code migration by Q3 2026. Focus on Frontend Components and Reporting Module
                        next quarter.
                    </div>
                </div>
            </section>
        </div>

        <!-- COVERAGE TAB -->
        <div id="coverage" class="content">
            <section>
                <h2>üìà Test Coverage & Feature Analysis</h2>

                <div class="metrics-grid">
                    <div class="card coverage">
                        <div class="kpi-label">Overall Coverage</div>
                        <div class="kpi-value">85%</div>
                        <div class="kpi-trend">Target: 85%+ ‚úÖ</div>
                    </div>

                    <div class="card coverage">
                        <div class="kpi-label">Covered Features</div>
                        <div class="kpi-value">54</div>
                        <div class="kpi-trend">of 62 features</div>
                    </div>

                    <div class="card coverage">
                        <div class="kpi-label">Uncovered Features</div>
                        <div class="kpi-value">8</div>
                        <div class="kpi-trend">‚ö†Ô∏è Needs testing</div>
                    </div>

                    <div class="card coverage">
                        <div class="kpi-label">Critical Feature Tests</div>
                        <div class="kpi-value">100%</div>
                        <div class="kpi-trend">All covered</div>
                    </div>
                </div>

                <h3 style="margin-top: 30px; margin-bottom: 20px; color: white;">Feature Test Coverage Breakdown</h3>

                <div style="background: white; padding: 25px; border-radius: 10px; box-shadow: var(--shadow); margin-bottom: 30px;">
                    <div style="margin-bottom: 20px;">
                        <h4 style="margin-bottom: 15px;">‚úÖ Fully Covered Features (54)</h4>
                        <div class="feature-row">
                            <div class="feature-name">Trail Management</div>
                            <div class="feature-stats">
                                <span>9 tests</span>
                                <span>100%</span>
                            </div>
                        </div>
                        <div class="feature-row">
                            <div class="feature-name">Weather Forecasting</div>
                            <div class="feature-stats">
                                <span>6 tests</span>
                                <span>100%</span>
                            </div>
                        </div>
                        <div class="feature-row">
                            <div class="feature-name">Equipment Recommendations</div>
                            <div class="feature-stats">
                                <span>8 tests</span>
                                <span>100%</span>
                            </div>
                        </div>
                        <div class="feature-row">
                            <div class="feature-name">User Authentication</div>
                            <div class="feature-stats">
                                <span>12 tests</span>
                                <span>100%</span>
                            </div>
                        </div>
                        <div class="feature-row">
                            <div class="feature-name">Trail Discovery</div>
                            <div class="feature-stats">
                                <span>18 tests</span>
                                <span>95%</span>
                            </div>
                        </div>
                    </div>

                    <div>
                        <h4 style="margin-bottom: 15px; color: #dc3545;">‚ùå Uncovered Features (8)</h4>
                        <div class="feature-row" style="border-left-color: #dc3545; background: #fff5f5;">
                            <div class="feature-name">Advanced Filters</div>
                            <div class="feature-stats">
                                <span>0 tests</span>
                                <span style="color: #dc3545;">0%</span>
                            </div>
                        </div>
                        <div class="feature-row" style="border-left-color: #dc3545; background: #fff5f5;">
                            <div class="feature-name">Export Functionality</div>
                            <div class="feature-stats">
                                <span>0 tests</span>
                                <span style="color: #dc3545;">0%</span>
                            </div>
                        </div>
                        <div class="feature-row" style="border-left-color: #dc3545; background: #fff5f5;">
                            <div class="feature-name">Mobile Push Notifications</div>
                            <div class="feature-stats">
                                <span>0 tests</span>
                                <span style="color: #dc3545;">0%</span>
                            </div>
                        </div>
                        <div class="feature-row" style="border-left-color: #dc3545; background: #fff5f5;">
                            <div class="feature-name">Social Sharing</div>
                            <div class="feature-stats">
                                <span>0 tests</span>
                                <span style="color: #dc3545;">0%</span>
                            </div>
                        </div>
                        <div class="feature-row" style="border-left-color: #dc3545; background: #fff5f5;">
                            <div class="feature-name">Analytics Dashboard</div>
                            <div class="feature-stats">
                                <span>0 tests</span>
                                <span style="color: #dc3545;">0%</span>
                            </div>
                        </div>
                        <div class="feature-row" style="border-left-color: #dc3545; background: #fff5f5;">
                            <div class="feature-name">Batch Operations</div>
                            <div class="feature-stats">
                                <span>0 tests</span>
                                <span style="color: #dc3545;">0%</span>
                            </div>
                        </div>
                        <div class="feature-row" style="border-left-color: #dc3545; background: #fff5f5;">
                            <div class="feature-name">Real-time Sync</div>
                            <div class="feature-stats">
                                <span>0 tests</span>
                                <span style="color: #dc3545;">0%</span>
                            </div>
                        </div>
                        <div class="feature-row" style="border-left-color: #dc3545; background: #fff5f5;">
                            <div class="feature-name">Offline Mode</div>
                            <div class="feature-stats">
                                <span>0 tests</span>
                                <span style="color: #dc3545;">0%</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="highlight-box danger">
                    <strong>üö® Action Required</strong>
                    <p><strong>8 features without test coverage:</strong> Advanced Filters, Export, Push Notifications, Social Sharing, Analytics, Batch Ops, Real-time Sync, Offline Mode. Recommend prioritizing tests for Advanced Filters and Export Functionality (high user impact).</p>
                </div>
            </section>
        </div>

        <!-- VELOCITY ANALYSIS TAB -->
        <div id="velocity" class="content">
            <section class="velocity-section">
                <h2>‚ö° Development Velocity Analysis</h2>
                <p style="color: #666; margin-bottom: 20px;">Compare code velocity across different time periods to identify trends, improvements, and team performance patterns.</p>

                <div class="velocity-comparison" id="velocity-cards">
                    <div class="velocity-card">
                        <div class="velocity-card-title">üìä Commits per Day</div>
                        <div class="velocity-row">
                            <div>
                                <div class="velocity-label">Current Period</div>
                                <div class="velocity-value" id="velocity-commits-current">4.8</div>
                            </div>
                            <div>
                                <div style="font-size: 2rem; font-weight: bold; color: #ddd;">‚Üí</div>
                            </div>
                            <div>
                                <div class="velocity-label">Previous Period</div>
                                <div class="velocity-value previous" id="velocity-commits-previous">3.7</div>
                            </div>
                        </div>
                        <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #e9ecef; display: flex; justify-content: space-between; align-items: center;">
                            <span class="trend-badge up" id="velocity-commits-trend">‚Üë +28%</span>
                            <span style="font-size: 0.85rem; color: #666;" id="velocity-commits-detail">+0.8 commits/day</span>
                        </div>
                    </div>

                    <div class="velocity-card">
                        <div class="velocity-card-title">üìà Lines of Code per Day</div>
                        <div class="velocity-row">
                            <div>
                                <div class="velocity-label">Current Period</div>
                                <div class="velocity-value" id="velocity-loc-current">487</div>
                            </div>
                            <div>
                                <div style="font-size: 2rem; font-weight: bold; color: #ddd;">‚Üí</div>
                            </div>
                            <div>
                                <div class="velocity-label">Previous Period</div>
                                <div class="velocity-value previous" id="velocity-loc-previous">423</div>
                            </div>
                        </div>
                        <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #e9ecef; display: flex; justify-content: space-between; align-items: center;">
                            <span class="trend-badge up" id="velocity-loc-trend">‚Üë +15%</span>
                            <span style="font-size: 0.85rem; color: #666;" id="velocity-loc-detail">+64 LOC/day</span>
                        </div>
                    </div>

                    <div class="velocity-card">
                        <div class="velocity-card-title">‚úÖ Test Files per Week</div>
                        <div class="velocity-row">
                            <div>
                                <div class="velocity-label">Current Period</div>
                                <div class="velocity-value" id="velocity-tests-current">0.8</div>
                            </div>
                            <div>
                                <div style="font-size: 2rem; font-weight: bold; color: #ddd;">‚Üí</div>
                            </div>
                            <div>
                                <div class="velocity-label">Previous Period</div>
                                <div class="velocity-value previous" id="velocity-tests-previous">0.8</div>
                            </div>
                        </div>
                        <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #e9ecef; display: flex; justify-content: space-between; align-items: center;">
                            <span class="trend-badge neutral" id="velocity-tests-trend">‚Üí ¬±0%</span>
                            <span style="font-size: 0.85rem; color: #666;" id="velocity-tests-detail">No change</span>
                        </div>
                    </div>
                </div>

                <div class="chart-container">
                    <h3 style="margin-bottom: 15px;">Commit Velocity Comparison</h3>
                    <canvas id="velocityComparisonChart"></canvas>
                </div>

                <div class="chart-container">
                    <h3 style="margin-bottom: 15px;">Time Series - Commits Over Time</h3>
                    <canvas id="velocityTimeSeriesChart"></canvas>
                </div>
            </section>
        </div>

        <!-- METHODOLOGY TAB -->
        <div id="explanation" class="content">
            <section>
                <h2>üìö Metrics Calculation Methodology</h2>

                <div class="card">
                    <h3>üîÑ Data Collection & Processing Pipeline</h3>
                    <p style="margin-bottom: 15px; color: #666;">Metrics are collected daily through an automated pipeline ensuring consistency and accuracy:</p>
                    <ol style="margin-left: 20px; color: #666; line-height: 2;">
                        <li><strong>Daily Trigger:</strong> Collection cycle initiates at 2 AM UTC</li>
                        <li><strong>Data Pull:</strong> GitHub API queries all commits from past 365 days</li>
                        <li><strong>Repository Analysis:</strong> Shallow clone with comprehensive code scanning</li>
                        <li><strong>Calculations:</strong> All metrics computed using standardized formulas</li>
                        <li><strong>Storage:</strong> Results persisted to database with timestamp</li>
                        <li><strong>Export:</strong> JSON exports generated for visualization</li>
                        <li><strong>Dashboard Update:</strong> Visualizations refresh automatically</li>
                    </ol>
                    <p style="margin-top: 15px; color: #999; font-size: 0.9rem;"><strong>Average Processing Time:</strong> 10-15 minutes per project</p>
                </div>

                <div class="card ai-metrics">
                    <h3>ü§ñ AI-Generated Code Detection Algorithm</h3>
                    <p style="margin-bottom: 15px; color: #666;"><strong>Method:</strong> Keyword-based detection in commit messages with multi-pass confidence scoring</p>
                    <div style="background: #f8f9fa; padding: 12px; border-radius: 5px; margin-bottom: 15px; font-size: 0.9rem; color: #333;">
                        <strong>Detection Keywords:</strong> copilot, chatgpt, claude, ai-generated, auto-generated, generated by ai, llm, openai, anthropic, gemini
                    </div>
                    <p style="color: #666; margin-bottom: 10px;"><strong>Confidence Scoring:</strong></p>
                    <ul style="margin-left: 20px; color: #666; margin-bottom: 15px;">
                        <li>High-confidence keywords (copilot, chatgpt, claude): 0.95 confidence</li>
                        <li>Generic AI references: 0.70 confidence</li>
                        <li>Code pattern analysis: 0.45 confidence</li>
                        <li>Threshold for classification: ‚â•0.50 confidence</li>
                    </ul>
                    <div style="background: #e6d9ff; padding: 12px; border-radius: 5px; border-left: 4px solid var(--ai);">
                        <strong>üîç Accuracy Notes:</strong> 85-90% detection rate. Some AI code lacks attribution markers; false positives occur with generic "automated" references. Manual review recommended for borderline cases.
                    </div>
                    <p style="margin-top: 15px; color: #666;"><strong>Key Finding:</strong> 28% AI-assisted code maintains 100% test pass rates and 8.9/10 quality scores‚Äîno quality degradation detected.</p>
                </div>

                <div class="card quality">
                    <h3>‚úÖ Code Quality Score - Weighted Formula</h3>
                    <p style="margin-bottom: 15px; color: #666;"><strong>Scale:</strong> 0-10 (10 = perfect) | <strong>Current Average:</strong> 8.9/10 | <strong>Target:</strong> ‚â•8.0/10</p>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 5px; margin-bottom: 15px; font-family: monospace; font-size: 0.95rem; color: #333; overflow-x: auto;">
Quality Score = (Test_Coverage √ó 0.35)
              + (Complexity_Score √ó 0.25)
              + (Documentation √ó 0.20)
              + (Build_Success √ó 0.15)
              + (Review_Compliance √ó 0.05)
                    </div>
                    <p style="color: #666; margin-bottom: 10px;"><strong>Component Details:</strong></p>
                    <ul style="margin-left: 20px; color: #666;">
                        <li><strong>Test Coverage (35%):</strong> (Statements Covered / Total Statements) √ó 100, target ‚â•85%</li>
                        <li><strong>Complexity (25%):</strong> Cyclomatic complexity analysis, maintainability index</li>
                        <li><strong>Documentation (20%):</strong> (Components with Docs / Total Components) √ó 100, target ‚â•90%</li>
                        <li><strong>Build Success (15%):</strong> (Successful Builds / Total Attempts) √ó 100, target ‚â•99%</li>
                        <li><strong>Review Compliance (5%):</strong> Code review adherence and approval rates</li>
                    </ul>
                </div>

                <div class="card coverage">
                    <h3>üìä Feature Coverage Analysis</h3>
                    <p style="margin-bottom: 15px; color: #666;"><strong>Current Status:</strong> 54/62 features = 87% coverage | <strong>Target:</strong> ‚â•90%</p>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 5px; margin-bottom: 15px;">
                        <p style="color: #333; font-weight: 600; margin-bottom: 10px;">Uncovered Features Priority:</p>
                        <ul style="margin-left: 20px; color: #666;">
                            <li><strong>HIGH Priority:</strong> Advanced Filters, Export Functionality (user-facing)</li>
                            <li><strong>MEDIUM Priority:</strong> Push Notifications, Social Sharing, Analytics Dashboard</li>
                            <li><strong>LOW Priority:</strong> Batch Operations, Real-time Sync, Offline Mode</li>
                        </ul>
                    </div>
                    <p style="color: #666;"><strong>Priority Calculation:</strong> Impact Weight √∑ Estimated Effort (in days)</p>
                </div>

                <div class="card refactor">
                    <h3>üîÑ Legacy Code Refactoring Metrics</h3>
                    <p style="margin-bottom: 15px; color: #666;"><strong>Formula:</strong> (LOC Modernized / Total Legacy LOC) √ó 100</p>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 5px;">
                        <p style="color: #333; margin-bottom: 10px;"><strong>Current Status:</strong></p>
                        <ul style="margin-left: 20px; color: #666; margin-bottom: 15px;">
                            <li>Modernized: 45K LOC (18% of 250K total)</li>
                            <li>Pace: ~3,750 LOC/month average</li>
                            <li>Timeline: 42 refactoring events over 12 months</li>
                            <li>Projected Completion: Q3 2026</li>
                        </ul>
                        <p style="color: #333; margin-bottom: 10px;"><strong>Modules Status:</strong></p>
                        <ul style="margin-left: 20px; color: #666;">
                            <li>‚úÖ Authentication: Modernized</li>
                            <li>‚úÖ Database Layer: Updated</li>
                            <li>üîÑ API Gateway: In Progress</li>
                            <li>‚è≥ Frontend Components & Reporting: Pending</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3>‚ö° Velocity & Automation Improvements</h3>
                    <p style="margin-bottom: 15px; color: #666;"><strong>Code Velocity Improvement:</strong> +42% | <strong>Automation Improvement:</strong> +34%</p>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 5px;">
                        <p style="color: #333; margin-bottom: 10px;"><strong>Velocity Components:</strong></p>
                        <ul style="margin-left: 20px; color: #666; margin-bottom: 15px;">
                            <li>Baseline (Q4 2025): 12 features + 34 bugs + 175K LOC</li>
                            <li>Current (Q1 2026): 17 features + 41 bugs + 248K LOC</li>
                            <li>Net Improvement: +42%</li>
                        </ul>
                        <p style="color: #333; margin-bottom: 10px;"><strong>Automation Breakdown:</strong></p>
                        <ul style="margin-left: 20px; color: #666;">
                            <li>Test Automation: 85% ‚Üí 99% (+16.5%)</li>
                            <li>Deployment Automation: 60% ‚Üí 100% (+66.7%)</li>
                            <li>Build Speed: 5.2m ‚Üí 4.2m (+19.2%)</li>
                            <li>Build Success Rate: 98.5% ‚Üí 99.8% (+1.3%)</li>
                        </ul>
                    </div>
                </div>

                <div style="background: #e7f3ff; padding: 20px; border-radius: 8px; border-left: 4px solid var(--primary); margin-top: 20px;">
                    <h3 style="color: var(--primary); margin-bottom: 15px;">‚ùì Frequently Asked Questions</h3>
                    <div style="color: #666;">
                        <p style="margin-bottom: 10px;"><strong>Q: How are features identified for coverage analysis?</strong></p>
                        <p style="margin-left: 10px; margin-bottom: 15px; color: #777;">Test file name analysis, feature branch parsing, commit message parsing, and code file organization patterns.</p>

                        <p style="margin-bottom: 10px;"><strong>Q: What if coverage reports aren't generated?</strong></p>
                        <p style="margin-left: 10px; margin-bottom: 15px; color: #777;">Coverage is marked as unavailable for that build. Reports must be committed to repository.</p>

                        <p style="margin-bottom: 10px;"><strong>Q: How frequently should metrics be reviewed?</strong></p>
                        <p style="margin-left: 10px; color: #777;">Weekly (team leads), Biweekly (managers), Monthly (directors), Quarterly (executives)</p>
                    </div>
                </div>
            </section>
        </div>

        <!-- INSIGHTS TAB -->
        <div id="insights" class="content">
            <section>
                <h2>üí° Executive Insights & Recommendations</h2>

                <div class="insight">
                    <div class="insight-title">‚úÖ AI Implementation Success</div>
                    <div class="insight-text">
                        <strong>Status:</strong> AI-assisted development is delivering 42% velocity improvement while maintaining
                        quality standards. 28% of commits show AI keywords without degradation in test pass rates (100% across all projects).
                        <br><br>
                        <strong>Recommendation:</strong> Continue AI integration, particularly for boilerplate code and utility functions.
                        Monitor quality metrics quarterly.
                    </div>
                </div>

                <div class="insight">
                    <div class="insight-title">‚ö†Ô∏è Test Coverage Gaps</div>
                    <div class="insight-text">
                        <strong>Status:</strong> 8 features remain untested (13% of feature set). All critical features are covered at 100%,
                        but lower-priority features lag.
                        <br><br>
                        <strong>Priority Actions:</strong>
                        <ul style="margin-top: 10px; margin-left: 20px;">
                            <li>Week 1-2: Write tests for Advanced Filters and Export (high user impact)</li>
                            <li>Week 3-4: Cover Push Notifications and Social Sharing</li>
                            <li>Week 5+: Address remaining 4 features</li>
                        </ul>
                    </div>
                </div>

                <div class="insight">
                    <div class="insight-title">üîÑ Refactoring Progress</div>
                    <div class="insight-text">
                        <strong>Status:</strong> 18% legacy code modernized (45K LOC) through 42 refactoring iterations.
                        Current velocity: ~3.75K LOC/month.
                        <br><br>
                        <strong>Projection:</strong> At current pace, complete legacy modernization by Q3 2026.
                        Next focus: Frontend Components and Reporting Module.
                    </div>
                </div>

                <div class="insight">
                    <div class="insight-title">üìö Documentation Excellence</div>
                    <div class="insight-text">
                        <strong>Status:</strong> 92% documentation coverage across all projects. RnDMetrics leads at 98%,
                        TrailEquip at 95%, TrailWaze at 88%.
                        <br><br>
                        <strong>Action:</strong> Minimal work needed. Maintain current standards and ensure new features
                        include documentation before merge.
                    </div>
                </div>

                <div class="insight">
                    <div class="insight-title">üöÄ Automation & Velocity</div>
                    <div class="insight-text">
                        <strong>Metrics:</strong>
                        <ul style="margin-top: 10px; margin-left: 20px;">
                            <li>Code velocity: +42% with AI assistance</li>
                            <li>Automation improvement: 34% efficiency gain</li>
                            <li>Build success rate: 99.8%</li>
                            <li>Code review compliance: 98%</li>
                        </ul>
                        <br>
                        <strong>Assessment:</strong> Engineering practices are highly optimized. CI/CD pipeline is reliable
                        and well-maintained. Consider further investment in automated security scanning and performance profiling.
                    </div>
                </div>

                <div class="insight">
                    <div class="insight-title">üéØ Q2 2026 Priorities</div>
                    <div class="insight-text">
                        <strong>Ranked by Impact:</strong>
                        <ol style="margin-top: 10px; margin-left: 20px;">
                            <li><strong>High:</strong> Complete test coverage for 8 uncovered features (2-3 weeks)</li>
                            <li><strong>High:</strong> Continue legacy code modernization (ongoing)</li>
                            <li><strong>Medium:</strong> Improve TrailWaze documentation to 95%+ (1 week)</li>
                            <li><strong>Medium:</strong> Implement advanced security scanning (2 weeks)</li>
                            <li><strong>Low:</strong> Optimize build pipeline further (1-2 weeks)</li>
                        </ol>
                    </div>
                </div>

                <div class="highlight-box">
                    <strong>üìä Overall Assessment: STRONG</strong>
                    <p>The R&D team is delivering high-quality code with excellent test coverage, comprehensive documentation,
                    and successful AI integration. The 42% velocity improvement from AI, combined with zero quality degradation,
                    represents a significant competitive advantage. Focus on addressing the 8 untested features and continue
                    legacy modernization to maintain momentum.</p>
                </div>
            </section>
        </div>
    </div>

    <!-- Footer -->
    <div class="footer">
        <p>RnDMetrics Executive Dashboard | Last Updated: January 31, 2026 | For R&D Leadership Only</p>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        function switchTab(tabName) {
            const contents = document.querySelectorAll('.content');
            contents.forEach(content => content.classList.remove('active'));
            const tabs = document.querySelectorAll('.nav-tab');
            tabs.forEach(tab => tab.classList.remove('active'));

            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
            window.scrollTo(0, 0);

            // Initialize charts when tabs are opened
            if (tabName === 'ai-metrics' && !window.aiChartInitialized) {
                initializeAIChart();
                window.aiChartInitialized = true;
            }
        }

        function initializeAIChart() {
            const ctx = document.getElementById('aiImpactChart');
            if (!ctx) return;

            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['TrailEquip', 'TrailWaze', 'RnDMetrics', 'Average'],
                    datasets: [
                        {
                            label: 'AI-Generated %',
                            data: [25, 30, 28, 28],
                            backgroundColor: '#6f42c1',
                            borderColor: '#6f42c1',
                            borderWidth: 2
                        },
                        {
                            label: 'Human-Generated %',
                            data: [75, 70, 72, 72],
                            backgroundColor: '#20c997',
                            borderColor: '#20c997',
                            borderWidth: 2
                        }
                    ]
                },
                options: {
                    indexAxis: 'y',
                    scales: {
                        x: {
                            stacked: true,
                            max: 100
                        },
                        y: {
                            stacked: true
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }

        // Global data storage
        let allHistoryData = [];

        // Load history data from JSON
        async function loadHistoryData() {
            try {
                const response = await fetch('../output/history.json');
                const data = await response.json();
                allHistoryData = data.snapshots || [];
                console.log('Loaded', allHistoryData.length, 'snapshots from history.json');
                return true;
            } catch (error) {
                console.warn('Could not load history.json, using fallback data');
                return false;
            }
        }

        // Filter snapshots by date range
        function getSnapshotsInRange(startDate, endDate) {
            const start = new Date(startDate).getTime();
            const end = new Date(endDate).getTime();

            return allHistoryData.filter(snapshot => {
                const snapTime = new Date(snapshot.snapshot_date).getTime();
                return snapTime >= start && snapTime <= end;
            });
        }

        // Calculate velocity metrics from snapshots
        function calculateVelocityMetrics(snapshots) {
            if (snapshots.length === 0) {
                return { commitsPerDay: 0, locPerDay: 0, testFilesPerWeek: 0, totalCommits: 0 };
            }

            // Count total commits
            let totalCommits = 0;
            const dailyCommitCounts = {};

            snapshots.forEach(snapshot => {
                if (snapshot.daily_commits) {
                    Object.entries(snapshot.daily_commits).forEach(([date, count]) => {
                        dailyCommitCounts[date] = (dailyCommitCounts[date] || 0) + count;
                        totalCommits += count;
                    });
                }
            });

            const uniqueDays = Object.keys(dailyCommitCounts).length;
            const commitsPerDay = uniqueDays > 0 ? totalCommits / uniqueDays : 0;

            // Calculate LOC change
            let locStart = 0, locEnd = 0;
            if (snapshots.length > 0) {
                locStart = snapshots[0].repo_metrics?.lines_of_code || 0;
                locEnd = snapshots[snapshots.length - 1].repo_metrics?.lines_of_code || 0;
            }
            const locPerDay = snapshots.length > 0 ? (locEnd - locStart) / snapshots.length : 0;

            // Calculate test files change
            let testStart = 0, testEnd = 0;
            if (snapshots.length > 0) {
                testStart = snapshots[0].repo_metrics?.test_files || 0;
                testEnd = snapshots[snapshots.length - 1].repo_metrics?.test_files || 0;
            }
            const weeksInPeriod = Math.max(snapshots.length / 7, 1);
            const testFilesPerWeek = (testEnd - testStart) / weeksInPeriod;

            return {
                commitsPerDay: Math.round(commitsPerDay * 100) / 100,
                locPerDay: Math.round(locPerDay),
                testFilesPerWeek: Math.round(testFilesPerWeek * 100) / 100,
                totalCommits: totalCommits,
                locChange: locEnd - locStart,
                testChange: testEnd - testStart,
                days: snapshots.length
            };
        }

        // Period Selector Functions
        function setPeriod(period) {
            const buttons = document.querySelectorAll('.period-tab');
            buttons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            const picker = document.getElementById('custom-picker');
            if (period === 'custom') {
                picker.classList.add('show');
            } else {
                picker.classList.remove('show');
                applyPeriod(period);
            }
        }

        function applyCustomPeriod() {
            const start = document.getElementById('period-start').value;
            const end = document.getElementById('period-end').value;
            if (start && end) {
                updatePeriodDisplay(start, end, 'custom');
                updateVelocityMetrics(start, end);
            }
        }

        function applyPeriod(period) {
            const today = new Date();
            const endDate = new Date(today);
            let startDate = new Date(today);
            let label = '';

            switch(period) {
                case '7d':
                    startDate.setDate(startDate.getDate() - 7);
                    label = 'Last 7 Days';
                    break;
                case '30d':
                    startDate.setDate(startDate.getDate() - 30);
                    label = 'Last 30 Days';
                    break;
                case '90d':
                    startDate.setDate(startDate.getDate() - 90);
                    label = 'Last 90 Days';
                    break;
                case 'ytd':
                    startDate = new Date(today.getFullYear(), 0, 1);
                    label = 'Year to Date';
                    break;
                case '2024':
                    startDate = new Date('2024-01-01');
                    endDate.setFullYear(2024, 11, 31);
                    label = 'All 2024';
                    break;
                case '2025':
                    startDate = new Date('2025-01-01');
                    label = 'All 2025';
                    break;
            }

            const startStr = startDate.toISOString().split('T')[0];
            const endStr = endDate.toISOString().split('T')[0];
            updatePeriodDisplay(startStr, endStr, label);
            updateVelocityMetrics(startStr, endStr);
        }

        function updatePeriodDisplay(start, end, label) {
            document.getElementById('period-text').textContent = label;

            const startDate = new Date(start);
            const endDate = new Date(end);
            const days = Math.floor((endDate - startDate) / (1000 * 60 * 60 * 24)) + 1;

            // Sample commits calculation (would come from data)
            const estimatedCommits = Math.round(days * 4.8);
            document.getElementById('period-stats').innerHTML = `<span>${days} days ‚Ä¢ ${estimatedCommits} commits</span>`;
        }

        function updateVelocityMetrics(start, end) {
            // Get snapshots for current and previous period
            const currentSnapshots = getSnapshotsInRange(start, end);

            // Calculate previous period (same duration, shifted back)
            const startDate = new Date(start);
            const endDate = new Date(end);
            const durationMs = endDate.getTime() - startDate.getTime();

            const prevEndDate = new Date(startDate.getTime() - 1);
            const prevStartDate = new Date(prevEndDate.getTime() - durationMs);

            const prevStart = prevStartDate.toISOString().split('T')[0];
            const prevEnd = prevEndDate.toISOString().split('T')[0];
            const previousSnapshots = getSnapshotsInRange(prevStart, prevEnd);

            // Calculate metrics
            const current = calculateVelocityMetrics(currentSnapshots);
            const previous = calculateVelocityMetrics(previousSnapshots);

            // Handle division by zero
            const commitsTrend = previous.commitsPerDay > 0
                ? ((current.commitsPerDay - previous.commitsPerDay) / previous.commitsPerDay * 100).toFixed(0)
                : 0;
            const locTrend = previous.locPerDay !== 0
                ? ((current.locPerDay - previous.locPerDay) / Math.abs(previous.locPerDay) * 100).toFixed(0)
                : 0;
            const testsTrend = previous.testFilesPerWeek > 0
                ? ((current.testFilesPerWeek - previous.testFilesPerWeek) / previous.testFilesPerWeek * 100).toFixed(0)
                : 0;

            // Update cards with real data
            document.getElementById('velocity-commits-current').textContent = current.commitsPerDay.toFixed(2);
            document.getElementById('velocity-commits-previous').textContent = previous.commitsPerDay.toFixed(2);
            document.getElementById('velocity-loc-current').textContent = current.locPerDay;
            document.getElementById('velocity-loc-previous').textContent = previous.locPerDay;
            document.getElementById('velocity-tests-current').textContent = current.testFilesPerWeek.toFixed(2);
            document.getElementById('velocity-tests-previous').textContent = previous.testFilesPerWeek.toFixed(2);

            // Update trend badges
            updateTrendBadge('velocity-commits-trend', commitsTrend);
            updateTrendBadge('velocity-loc-trend', locTrend);
            updateTrendBadge('velocity-tests-trend', testsTrend);

            // Update detail text
            const commitsDelta = (current.commitsPerDay - previous.commitsPerDay).toFixed(2);
            const locDelta = (current.locPerDay - previous.locPerDay);
            const testsDelta = (current.testFilesPerWeek - previous.testFilesPerWeek).toFixed(2);

            document.getElementById('velocity-commits-detail').textContent = `${commitsDelta > 0 ? '+' : ''}${commitsDelta} commits/day`;
            document.getElementById('velocity-loc-detail').textContent = `${locDelta > 0 ? '+' : ''}${locDelta} LOC/day`;
            document.getElementById('velocity-tests-detail').textContent = testsDelta == 0 ? 'No change' : `${testsDelta > 0 ? '+' : ''}${testsDelta} per week`;

            // Update charts
            renderVelocityCharts(currentSnapshots, previousSnapshots);
        }

        function updateTrendBadge(elementId, percentage) {
            const element = document.getElementById(elementId);
            const trend = parseFloat(percentage);

            element.classList.remove('up', 'down', 'neutral');

            if (trend > 0) {
                element.classList.add('up');
                element.textContent = `‚Üë +${percentage}%`;
            } else if (trend < 0) {
                element.classList.add('down');
                element.textContent = `‚Üì ${percentage}%`;
            } else {
                element.classList.add('neutral');
                element.textContent = '‚Üí ¬±0%';
            }
        }

        function updateTrendBadge(elementId, percentage) {
            const element = document.getElementById(elementId);
            const trend = parseFloat(percentage);

            element.classList.remove('up', 'down', 'neutral');

            if (trend > 0.5) {
                element.classList.add('up');
                element.textContent = `‚Üë +${percentage}%`;
            } else if (trend < -0.5) {
                element.classList.add('down');
                element.textContent = `‚Üì ${percentage}%`;
            } else {
                element.classList.add('neutral');
                element.textContent = '‚Üí ¬±0%';
            }
        }

        function renderVelocityCharts(currentSnapshots, previousSnapshots) {
            const current = calculateVelocityMetrics(currentSnapshots);
            const previous = calculateVelocityMetrics(previousSnapshots);

            // Velocity Comparison Chart
            const ctx1 = document.getElementById('velocityComparisonChart');
            if (ctx1 && ctx1.chart) {
                ctx1.chart.destroy();
            }

            ctx1.chart = new Chart(ctx1, {
                type: 'bar',
                data: {
                    labels: ['Commits/Day', 'LOC/Day (√∑10)', 'Tests/Week'],
                    datasets: [
                        {
                            label: 'Current Period',
                            data: [current.commitsPerDay, current.locPerDay / 10, current.testFilesPerWeek],
                            backgroundColor: '#007bff',
                            borderColor: '#0056b3',
                            borderWidth: 1
                        },
                        {
                            label: 'Previous Period',
                            data: [previous.commitsPerDay, previous.locPerDay / 10, previous.testFilesPerWeek],
                            backgroundColor: '#e9ecef',
                            borderColor: '#adb5bd',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });

            // Time Series Chart
            const ctx2 = document.getElementById('velocityTimeSeriesChart');
            if (ctx2 && ctx2.chart) {
                ctx2.chart.destroy();
            }

            // Generate day-by-day commit data
            const currentDailyData = {};
            const previousDailyData = {};

            currentSnapshots.forEach(s => {
                if (s.daily_commits) {
                    Object.assign(currentDailyData, s.daily_commits);
                }
            });

            previousSnapshots.forEach(s => {
                if (s.daily_commits) {
                    Object.assign(previousDailyData, s.daily_commits);
                }
            });

            const allDates = [...new Set([...Object.keys(currentDailyData), ...Object.keys(previousDailyData)])].sort();
            const recentDates = allDates.slice(-30);

            ctx2.chart = new Chart(ctx2, {
                type: 'line',
                data: {
                    labels: recentDates,
                    datasets: [
                        {
                            label: 'Current Period',
                            data: recentDates.map(d => currentDailyData[d] || 0),
                            borderColor: '#007bff',
                            backgroundColor: 'rgba(0, 123, 255, 0.1)',
                            tension: 0.4,
                            fill: true,
                            pointRadius: 3
                        },
                        {
                            label: 'Previous Period',
                            data: recentDates.map(d => previousDailyData[d] || 0),
                            borderColor: '#adb5bd',
                            backgroundColor: 'rgba(173, 181, 189, 0.1)',
                            tension: 0.4,
                            fill: true,
                            borderDash: [5, 5],
                            pointRadius: 3
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        mode: 'index',
                        intersect: false
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', async function() {
            const dataLoaded = await loadHistoryData();
            applyPeriod('30d');
            if (!dataLoaded) {
                console.warn('History data not available');
            }
        });
    </script>
</body>
</html>
